Что делает отчёт (кратко)
- Строит антирейтинг по лидам по рабочим этапам: считает среднее время в статусах, количество, баллы за превышение нормативов и среднее время до закрытия.
- Показывает сводку по контактам: сколько создано, сколько заполнено неполноценно, процент незаполненных и баллы.
- Фильтр по датам создания и списку ответственных (настройка).
- Время расчёта и контрольное число выводятся под таблицей лидов для быстрой проверки стабильности результата.

Подробности по лидам
- Основной источник истории статусов: таблица b_crm_lead_status_history (STATUS_ID, DATE_CREATE).
- Если по лиду нет записей в статус-хистори, используется таймлайн (TimelineBindingTable → TimelineTable с SETTINGS.FIELD = STATUS_ID), дальше при пустоте — CCrmEvent.
- Список статусов берётся из CCrmStatus по ENTITY_ID=STATUS с семантикой PROCESS (без S/F).
- Нормативы: NEW = norm_new, остальные этапы = norm_other (настройки). Баллы начисляются по превышению нормативов в днях, с одинаковыми баллами при равном превышении.
- Время до закрытия: от создания до первого финального статуса (семантика S/F), среднее по закрытым лидам.
- Кэш: 300 секунд; каталоги /custom/antirating/leads и /custom/antirating/contacts.

Подробности по контактам
- Выборка CCrmContact::GetListEx по ASSIGNED_BY_ID и DATE_CREATE; кэш /custom/antirating/contacts.
- Неполное заполнение: пустые поля POST или UF_CRM_5D4832E6850FC.
- Норматив: процент незаполненных 0%. Баллы начисляются по превышению (ранжирование по разнице).

Настройки
- Настройка нормативов (NEW, остальные) и списка пользователей формирует окончательный набор данных отчёта.
- Панель настроек доступна только администраторам; параметры уходят в GET-поля SETTINGS_NORM_NEW, SETTINGS_NORM_OTHER, SETTINGS_USERS.
